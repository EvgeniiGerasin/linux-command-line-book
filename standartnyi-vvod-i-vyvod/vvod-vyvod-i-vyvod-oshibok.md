# Ввод, вывод и вывод ошибок

В Linux стандартный ввод (stdin), стандартный вывод (stdout) и стандартный вывод ошибок (stderr) — это три основных потока данных, которые являются частью интерфейса между пользователем и программами, а также между самими программами. Стандартный вывод и стандартный вывод ошибок — это специальные файлы. По умолчанию оба связаны с экраном и не сохраняют результат на компьютер.



{% hint style="info" %}
Заметка **Поток данных** — это последовательность данных, передаваемых от источника к приемнику.
{% endhint %}

## Стандартный ввод

Это поток данных, который программа использует для получения входных данных. По умолчанию stdin связан с клавиатурой, то есть программа ожидает ввода данных от пользователя через терминал. Однако stdin можно перенаправить для чтения данных из файла или из вывода другой программы с использованием операторов перенаправления. Например когда мы печатаем команду `ls` в терминале выполняется стандартный ввод.

```
gerasin@DESKTOP-9IF30U0:~$ ls
```

## Стандартный вывод

Это поток данных, который программа использует для вывода результатов своей работы. По умолчанию stdout связан с терминалом, то есть программа выводит данные на экран. Результат выполнения команды `ls` — это стандартный вывод.

```
documents  file.txt  project  work
```

## Стандартный вывод ошибок

Это поток данных, который программа использует для вывода сообщений об ошибках. По умолчанию stderr также связан с терминалом, но он выводится отдельно от stdout. Если ввести несуществующую команду, то результатом будет стандартный вывод ошибки.

```
gerasin@DESKTOP-9IF30U0:~$ ll
-bash: ll: command not found
```

## Перенаправление стандартного вывода

В Linux можно перенаправлять потоки вывода и вывода ошибок. Для этого используют специальные операторы.

| **Оператор** | **Описание**                                                                  |
| ------------ | ----------------------------------------------------------------------------- |
| `>`          | Перенаправляет **stdout** в файл (перезаписывает файл).                       |
| `>>`         | Перенаправляет **stdout** в файл (добавляет в конец файла).                   |
| `2>` / `2>>` | Перенаправляет **stderr** в файл.                                             |
| `&>` / `&>>` | Перенаправляет и **stdout**, и **stderr** в файл.                             |
| \|           | Передает **stdout** одной программы на **stdin** другой программы (конвейер). |

### Перенаправление stdout в файл

**`>`** — перезаписывает файл.

```
gerasin@DESKTOP-9IF30U0:~$ ls -lt > file.txt
```

Если файл существует, он будет перезаписан. Если файл не существует, он будет создан.

**`>>`** — добавляет в конец файла.

```
gerasin@DESKTOP-9IF30U0:~$ ls -lt /etc/ >> file.txt
```

Если файл существует, данные будут добавлены в конец файла. Если файл не существует, он будет создан.

### Перенаправление stderr в файл

**`2>`** — перенаправляет только stderr в файл.

```
gerasin@DESKTOP-9IF30U0:~$ lls 2> file.txt
```

Сообщения об ошибках будут записаны в файл `file.txt`. Если файл существует, он будет перезаписан. Если файл не существует, он будет создан.

{% hint style="info" %}
Почему именно 2? Цифра 2 выбрана потому, что она соответствует файловому дескриптору stderr. Это соглашение, принятое в Unix-системах: 0 — stdin. 1 — stdout. 2 — stderr.
{% endhint %}

## Перенаправление stdout и stderr в один файл

**`&>`** — перенаправляет и stdout, и stderr в файл.

```
gerasin@DESKTOP-9IF30U0:~$ lls &> file.txt
gerasin@DESKTOP-9IF30U0:~$ ls &>> file.txt
gerasin@DESKTOP-9IF30U0:~$ cat file.txt
-bash: lls: command not found
documents
file.txt
project
work
```

Как видно из примера. С начала был перенаправлен вывод ошибки `&>` в файл `file.txt`, затем перенаправлен вывод результата выполнения команды ls в конец файла `&>>`.

## Использование конвейера (pipe)

Конвейер `|` позволяет передавать stdout одной программы на stdin другой программы. Это полезно для создания цепочек команд. &#x20;

```
gerasin@DESKTOP-9IF30U0:~$ cat logfile.txt | grep "WARNING" | sort | uniq
```

Получилась следующая цепочка (конвейер) команд:

1. **`cat logfile.txt`**: читает содержимое файла `logfile.txt` и передает stdout в stdin команды `grep`.
2. **`grep "WARNING"`** : фильтрует строки, содержащие слово "WARNING" и передает stdout в stdin команды `sort`.
3. **`sort`**: сортирует строки в алфавитном порядке и передает stdout в stdin команды `uniq`.
4. **`uniq`**: удаляет дубликаты строк и выводит на экран результат

{% hint style="warning" %}
`>` используется для записи результатов в файл, тогда как `|` — для передачи данных между командами.
{% endhint %}

## Перенаправление в /dev/null

Перенаправление в **`/dev/null`** — это способ "поглотить" или игнорировать вывод команды в Linux. Файл `/dev/null` — это специальный файл, которое действует как "черная дыра": всё, что в него записывается, исчезает безвозвратно. Это полезно, когда вам нужно подавить вывод команды (например, чтобы он не засорял терминал).

```
gerasin@DESKTOP-9IF30U0:~$ ls -lt /etc/ > /dev/null
```

В примере результат выполнения команды `ls -lt /etc` был перенаправлен в `/dev/null`. Если вы попытаетесь прочитать из `/dev/null`, вы получите пустой результат.

```
gerasin@DESKTOP-9IF30U0:~$ less -f /dev/null
```
