# su и sudo. Смена пользователя

Есть 3 способа смены пользователя:

1. Выйти из системы и зайти под новыми учетными данными
2. Использовать команду `su`
3. Использовать команду `sudo`

## Смена пользователя с помощью команды `su`

Команда `su` в Linux используется для переключения между пользователями без выхода из текущей сессии. Она позволяет временно получить права другого пользователя, включая root (администратора). При использовании команды `su`, нужно ввести пароль целевого пользователя.

Если пользователь не указан, подразумевается суперпользователь (root).

```bash
gerasin@DESKTOP-9IF30U0:~$ su
Password:
root@DESKTOP-9IF30U0:/home/gerasin#
```

Для выхода из режима суперпользователя используется команда `exit`.

```bash
root@DESKTOP-9IF30U0:/home/gerasin# exit
exit
gerasin@DESKTOP-9IF30U0:~$
```

Можно так же просто выполнить единственную команду под другим пользователем. Для этого используется параметр `-c`.

```bash
gerasin@DESKTOP-9IF30U0:~$ su -c 'cat /etc/shadow'
Password:
root:$y$j9T$DbJge6J2...
.
.
.
```

Не забудьте заключить команду в кавычки, чтобы предотвратить дополнительную ее интерпретацию механизмами подстановки текущей командной оболочки.

## Выполнение команд с помощью `sudo`

Команда `sudo` используется в операционных системах семейства Unix для выполнения команд от имени суперпользователя (root). Она позволяет пользователям временно получить привилегии администратора для выполнения задач, требующих повышенных прав доступа, таких как установка программного обеспечения, изменение системных файлов или управление пользователями. Администратор может определить порядок использования `sudo` обычными пользователями, ограничив возможность запуска команд от имени другого пользователя.

`sudo` не требует ввода пароля суперпользователя. Для аутентификации в команде `sudo` пользователь должен ввести свой пароль.

```bash
gerasin@DESKTOP-9IF30U0:~$ sudo cat /etc/shadow
[sudo] password for gerasin:
root:$y$j9T$DbJge6J2...
.
.
.
```

Для получения списка привилегий для текущего пользователя необходимо запустить команду с параметров `-l`.

```bash
gerasin@DESKTOP-9IF30U0:~$ sudo -l
Matching Defaults entries for gerasin on DESKTOP-9IF30U0:
env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin, use_pty

User gerasin may run the following commands on DESKTOP-9IF30U0:
    (ALL : ALL) ALL
```

{% hint style="danger" %}
В мире Unix традиционно проводится чёткое разделение между обычными пользователями и администраторами. Привилегии суперпользователя предоставляются только тогда, когда они действительно необходимы. Для этого используются команды `su` и `sudo`. Команда `su` позволяет переключиться на другого пользователя, включая суперпользователя, но её использование может привести к тому, что пользователи будут постоянно работать с административными правами, что снижает безопасность системы. Поэтому рекомендуется создавать отдельных пользователей для повседневной работы и использовать команду `sudo` в крайних случаях.
{% endhint %}

