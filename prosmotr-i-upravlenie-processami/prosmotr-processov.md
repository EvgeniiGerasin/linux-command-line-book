# Просмотр процессов

Программа `ps` отображает процессы в Linux.

```
gerasin@DESKTOP-9IF30U0:~$ ps
    PID TTY          TIME CMD
    626 pts/0    00:00:00 bash
    864 pts/0    00:00:00 ps
```

Без дополнительных параметров `ps` выводит только процессы текущего пользователя. Для вывода всех процессов используются параметры `aux`.

```
gerasin@DESKTOP-9IF30U0:~$ ps aux
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           1  0.0  0.1 167640 11948 ?        Ss   12:34   0:00 /sbin/init
root           2  0.0  0.0   2776  1920 ?        Sl   12:34   0:00 /init
.
.
.
```

## Описание вывода

### USER

Кто запустил процесс. Например, root — это суперпользователь (администратор), а user — обычный пользователь.

### PID

Идентификатор процесса (Process ID ). У каждого процесса есть свой уникальный номер. Например, 1 — это первый процесс в системе (обычно это init или systemd).

### %CPU

Сколько процессорного времени использует процесс (в процентах). Например, 0.2 означает, что процесс использует 0.2% CPU.

### %MEM

Сколько оперативной памяти использует процесс (в процентах). Например, 0.5 означает, что процесс использует 0.5% RAM.

### VSZ

Виртуальный размер процесса (Virtual Memory Size ) в килобайтах. Это общий объем памяти, который процесс зарезервировал для себя, включая неиспользуемую память.

### RSS

Физический размер процесса (Resident Set Size ) в килобайтах. Это объем оперативной памяти, который процесс реально использует.

### TTY

Терминал, из которого был запущен процесс. Например:

* `?` — процесс не привязан к терминалу (фоновый процесс);
* `pts/0` — процесс запущен в терминале (например, в окне bash).

### STAT

Состояние процесса (Status ). Здесь могут быть разные символы, которые говорят о том, что делает процесс:

* `R` — процесс работает (Running);
* `S` — процесс спит (Sleeping);
* `D` — процесс ждёт завершения операции ввода/вывода;
* `Z` — процесс "зомби" (завершился, но его родительский процесс ещё не освободил ресурсы);
* `T` — процесс остановлен;
* `+` — процесс находится в группе переднего плана терминала;
* `s` — процесс является лидером сессии;
* `l` — процесс многопоточный.

### START

Время или дата запуска процесса.

### TIME

Общее время работы процессора, затраченное на выполнение этого процесса.

### COMMAND

Команда, которая запустила процесс. Например `/sbin/init` — это основной процесс системы. сделай таблицу

## Фильтрация процессов

### Фильтр по имени процесса

`ps aux | grep <имя процесса>`

```
gerasin@DESKTOP-9IF30U0:~$ ps aux | grep bash
gerasin      635  0.0  0.0   7196  4052 pts/0    Ss   19:03   0:00 -bash
gerasin      667  0.0  0.0   7196  3832 pts/1    S+   19:03   0:00 -bash
gerasin      690  0.0  0.0   6332  2056 pts/0    S+   19:03   0:00 grep bash
```

### Фильтрация по пользователю

`ps -u <имя пользователя>`

```
gerasin@DESKTOP-9IF30U0:~$ ps -u root
```

`ps aux | grep ^<имя пользователя>`

```
gerasin@DESKTOP-9IF30U0:~$ ps aux | grep ^root
```

### Фильтрация по PID

`ps -p <PID>`

```
gerasin@DESKTOP-9IF30U0:~$ ps -p 777
```

### Фильтрация по загрузке CPU

```
gerasin@DESKTOP-9IF30U0:~$ ps aux --sort=-%cpu | head
```

* `--sort=-%cpu` сортирует процессы по загрузке CPU (знак `-` означает "по убыванию").
* `head` показывает первые 10 строк.

### Фильтрация по загрузке памяти

```
gerasin@DESKTOP-9IF30U0:~$ ps aux --sort=-%mem | head
```

### Фильтрация по состоянию процесса

`ps aux | grep ' <обозначение процесса> '`

```
gerasin@DESKTOP-9IF30U0:~$ ps aux | grep ' R '
```

### Комбинирование фильтров

Можно комбинировать несколько фильтров, чтобы сузить поиск.

```
gerasin@DESKTOP-9IF30U0:~$ ps aux --sort=-%cpu | grep ^root
```

* `--sort=-%cpu` сортирует процессы по CPU.
* `grep ^root` оставляет только процессы пользователя root.
